<!-- markdownlint-disable MD033 -->
<!-- markdownlint-disable MD010 -->
<!-- markdownlint-disable MD037 -->

# 資料和分析相關

分析相關若 SAS 的資料夾中沒有找到, 基本上可以在 R 或 python 上找到. 其中存活分析類的以 R 為主.

## 變量

### 處理變量(Treatment Variable)

    研究中感興趣的主要介入或操作變量.
    
    例如 : 藥物治療(接受治療 與 未接受治療).

### 預測變量(Predictor Variable) 或 解釋變量(Explanatory Variable)

    用來預測或解釋處理變量的變量.

    例如 : 年齡、性別或生活方式等.

### 結果變量(Outcome Variable) 或 依賴變量(Dependent Variable)

    結果變量是研究中被預測、被影響的變量. 通常為研究感興趣的點.

    例如 : 心血管疾病的症狀改善程度或生存率等.

舉例來說, 若想研究新藥是否相較於舊藥有效改善症狀. 則

* 處理變量 : 使用新舊藥
* 預測變量 : 年齡和血壓那些
* 結果變量 : 改善程度

### 混雜變量

    指研究中, 與研究目標和結果變量有關, 同時也與處理變量有關的一種變數. 當混雜變量與處理變量和結果變量同時有關時, 可能會導致混淆, 使得觀察到的效果不是真正的處理效果. 

    為了降低混雜變量對研究結果的影響, 可以採用 迴歸分析、傳統統計方法、PS/IPTW等方法.

## 資料處理

### PS 和 IPTW

    PS 和 IPTW 能處理混雜變量的原因在於, 他們可以將治療和對照組之間的差異集中在一個變數或權重上. 使得研究人員較容易控制或調整這些差異.

### Propensity Score (PS, 傾向評分)

    使用 logistic 進行擬合, 因變量為處理變量(例如新舊藥). 計算出每個個案的機率, 這些機率就是 PS.

### Inverse Probability Treatment Weighting (IPTW)

    利用 PS 計算每個個案的權重, 計算方式是 1/(abs(ps - (1 - label)))

### 利用 PS 或 IPTW 讓資料近似 RCT

1. 建立 Propensity Score : 使用 logistic 進行擬合, 計算出每個個案的機率, 這些機率就是 PS.

2. Matching 或 Weighting : 匹配對照組與實驗組的 Propensity Score 相似的觀測值, 或利用 IPTW 進行加權.

3. 建立虛擬 RCT(隨機對照試驗) : 匹配或加權後的資料集變得更加均衡, 類似於隨機對照試驗(RCT), 因為實驗組和對照組的背景特徵更相似.

    * 若是使用 Matching, 則因為匹配資料的關係所以會導致資料量減少
    * 加權資料是直接把加權值與 outcome 相乘

## 差異分析

比較處理組和對照組在特定變數上的差異

### T test

    t-test 常作為檢定一群來自常態分配母體的獨立樣本之期望值是否為某一實數，或是兩群來自常態分配母體的獨立樣本之期望值的差是否為某一實數。

    注意 : 雖然常態為必要條件，但是其實 T test 對於常態分佈不太敏感, 所以若樣本量夠大不一定要去檢定常態也沒關係. 但樣本量太小則必須檢定, 可以使用 KS test。

### ANOVA

    目的 : 檢定其各類別間平均數是否相等

### 無母數檢定

    Mann-Whitney U 檢定(Wilcoxon Rank-Sum 檢定) : 用於兩個獨立樣本的比較
    Kruskal-Wallis 檢定 : 用於比較三個或多個獨立樣本的差異
    Wilcoxon Signed-Rank 檢定 : 用於比較兩個配對樣本

    三個方法都是用於比較中位數或數據的次序.

## 迴歸分析

觀察處理變量和應變量的關係, 同時考慮控制其他潛在的混雜變量

### 傾向性分數校正後的迴歸分析

## 生存分析

若研究目標涉及時間至事件(如生存時間、復發率等), 可使用存活分析方法

### Kaplan-Meier

### Cox 比例風險模型

    在風險恆定的條件下, 用來檢定預測變量與結果變量的關係.

    若要檢定風險恆定, 則要使用殘差檢驗.