<!-- markdownlint-disable MD033 -->
<!-- markdownlint-disable MD010 -->

# 重要指令

1. DDL(資料定義語言, Data Definition Language)

    <font color = red>DDL(資料定義語言) 能建立或刪除資料庫和資料表等用來儲存資料的物件, 規劃資料儲存方式.</font> 以下為 DDL 的指令(關鍵字).
  
   * CREATE : 建立資料庫或資料表等
   * DROP : 刪除資料庫或資料表等
   * ALTER : 修改資料庫或資料表等物件的架構.

2. DML(資料操作語言, Data Manipulation Language)

    <font color = red>DML(資料操作語言) 能查詢或修改資料表內的記錄(以row為單位的資料).</font> 以下為 DML 的指令(關鍵字).
  
   * SELECT : 從資料表查詢記錄
   * INSERT : 將新紀錄儲存至資料表中
   * UPDATE : 修改資料表的記錄
   * DELETE : 刪除資料表的記錄
  
3. DCL(資料控制語言, Data Control Language)
  
    <font color = red>DCL(資料控制語言) 可以用來認可或取消對資料庫執行的變更動作, 另外也能設另外也能設定 RDBMS 的使用者對於資料表等物件的操作權限.</font> 以下為 DCL 的指令(關鍵字).

   * COMMIT : 認可對資料庫進行的變更動作
   * ROLLBACK : 取消對資料庫執行的變更動作
   * GRANT : 賦予使用者操作的權限
   * REVOKE : 測消使用者操作的權限

## 建立資料庫 (CREATE DATABASE 敘述)

```SQL
CREATE DATABASE <資料庫名稱>; #名稱必須使用半形文字, 資料表和欄位也是
```

例子 :

```SQL
CREATE DATABASE shop; # 建立名為shop的資料庫
```

## 建立資料表 (CREATE TABLE 敘述)

```SQL
CREATE TABLE <資料表名稱>
(<欄位名稱1> <資料型別> <此欄位的條件約束>,
 <欄位名稱2> <資料型別> <此欄位的條件約束>,
 <欄位名稱3> <資料型別> <此欄位的條件約束>,
 ...
 <此資料表的條件約束1>, <此資料表的條件約束2>, ...);
```

例子 :

```SQL
CREATE TABLE shohin #建立名為 shohin 的資料表
(shohin_id			CHAR(4) NOT NULL, #建立colname為shohin_id的col, id為四碼, 並且沒有NULL
 shohin_name		VARCHAR(100) NOT NULL, #長度最多 100 個字元的字串
 shohin_catalg		VARCHAR(32) NOT NULL,
 sell_price		    INTEGER, # 整數
 buying_price		INTEGER, 
 reg_data			DATE, # 日期
 PRIMARY KEY		(shohin_id));
```

<font size = 4>PRIMARY KEY : 用於定義一個資料表中的主鍵（primary key）。主鍵是用於唯一標識資料表中每一行的欄位或欄位組合。</font>

主鍵作用如下

* 唯一識別每一行：主鍵確保資料表中的每一行都具有唯一的識別值。這使得可以使用主鍵來準確地識別和操作資料表中的特定行。

* 避免重複和重複資料：主鍵的唯一性要求確保資料表中的每一行都具有不同的主鍵值。這可以防止插入重複或重複的資料，確保資料表中的資料是唯一的。

* 用於關聯和連接表：主鍵常用於建立表之間的關聯和連接。在關聯式資料庫中，主鍵用於定義表之間的關聯，以便在多個表之間建立關聯和查詢。

---

<font size = 5>資料型別</font> (p.1-25)

所有欄位都必須指定此項目, 基本上分為數值型別、字串名別、日期型別等. 另外 (n) 代表最大長度, 有些 RDBMS 代表最大位元組. 並且資料有區分大小寫, 代表大小寫不同代表不同資料.

常用的資料型別如下 :

* INTEGER（整數, INT）：用於存儲<font color = red>整數數值</font>，例如 1、2、-5 等。
* VARCHAR(n)（變長字串）：用於存儲<font color = red>可變長度的字串</font>，其中 n 表示最大長度限制，例如 VARCHAR(50) 表示最大長度為 50 的字串。
* CHAR(n)（定長字串）：用於存儲<font color = red>固定長度的字串</font>，其中 n 表示固定長度限制，例如 CHAR(10) 表示固定長度為 10 的字串, 如果存入的字元沒有這麼長，會自動補空格。
* FLOAT（浮點數）：用於存儲<font color = red>浮點數值</font>，例如 3.14、-0.5 等。
* DATE（日期）：用於存儲日期，例如 '2023-06-15'。
* TIME（時間）：用於存儲時間，例如 '09:30:00'。
* BOOLEAN（布林值）：用於存儲布林（真或假）值，例如 TRUE 或 FALSE。
* BLOB（二進位大型物件）：用於存儲二進位數據，例如圖像、音頻或視頻檔案。

---

<font size = 5>設定條件約束</font>

條件約束是在資料型別之外, 對存入欄位的資料增加限制或條件的功能.

寫在欄位之後的條件約束例子如下 :

* NOT NULL（非空）：確保欄位的值不能為 NULL。
* UNIQUE（唯一）：確保欄位的值在整個資料表中是唯一的，但可以包含 NULL 值。
* DEFAULT（預設）：為欄位指定一個預設值，在插入新記錄時，如果未提供該欄位的值，則將使用預設值。

```SQL
CREATE TABLE my_table (
  id INT,
  status VARCHAR(50) DEFAULT 'active'
);
```

對整個資料表的條件約束例子如下 :

* PRIMARY KEY（主鍵）：用於定義一個或多個欄位作為資料表的主鍵，確保每個值在主鍵欄位中是唯一的並且不為 NULL。
* FOREIGN KEY（外鍵）：用於建立兩個資料表之間的關聯，確保外鍵欄位的值在另一個關聯資料表的主鍵欄位中存在。
* CHECK（檢查）：用於定義一個條件表達式，該條件表達式必須在插入或更新資料時為真。
  
```sql
# 外鍵
CREATE TABLE orders (
  order_id INT,
  customer_id INT,
  order_date DATE,
  PRIMARY KEY (order_id),
  FOREIGN KEY (customer_id) REFERENCES customers(customer_id)
);
```

```sql
# 檢查
CREATE TABLE students (
  student_id INT,
  student_name VARCHAR(50),
  age INT,
  grade CHAR(1),
  CHECK (age >= 18),
  CHECK (grade IN ('A', 'B', 'C'))
);
```

---

<font size = 5>刪除資料表</font>

```SQL
DROP TABLE <資料表名稱>;
```

---

<font size = 5>修改資料表結構</font>

對已建立好的資料表進行修改

<font size = 4>新增欄位</font>

```SQL
ALTER TABLE <資料表名稱> ADD COLUMN <欄位名稱> <欄位設定>;
```

<font size = 4>例子 : 增加欄位名稱shohin_info的欄位</font>

```SQL
ALTER TABLE Shohin ADD COLUMN shohin_info VARCHAR(100);
```

---

<font size = 4>刪除欄位</font>

```SQL
ALTER TABLE <資料表名稱> DROP COLUMN <欄位名稱>;
```

<font size = 4>例子 : 刪除欄位名稱shohin_info的欄位</font>

```SQL
ALTER TABLE Shohin DROP COLUMN shohin_info;
```

---

<font size = 5 > 新增資料至資料表 </font>

```SQL
START TRANSACTION;

INSERT INTO <資料表名稱> VALUE (<欄位1資料>, <欄位2資料>, ...);
INSERT INTO <資料表名稱> VALUE (<欄位1資料>, <欄位2資料>, ...);
...

COMMIT;
```

<font size = 4>例子 : 隨便新增資料</font>

```SQL
START TRANSACTION;

INSERT INTO shohin VALUE ('009', 'test', 'test2', 1000, 200, '2010-01-02');

COMMIT;
```

---
<font size = 5 > 修改資料表名稱 </font>

```SQL
RENAME TABLE <修改前資料表名稱> to <修改後資料表名稱>
```

```SQL
RENAME TABLE sohin to shohin
```

